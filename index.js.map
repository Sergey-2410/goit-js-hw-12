{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '46125124-f513c5cbcff31d6d16e67daed';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport const PER_PAGE = 15;\n\nexport async function fetchImages(searchquery, currentPage = 1) {\n  const options = new URLSearchParams({\n    q: searchquery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: PER_PAGE,\n    page: currentPage,\n  });\n  const url = `${BASE_URL}?key=${API_KEY}&${options}`;\n  const {\n    data: { hits, totalHits },\n  } = await axios.get(url);\n\n  if (hits.length === 0) {\n    throw new Error('No cards found');\n  }\n  return { hits, totalHits };\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst lightbox = new SimpleLightbox('.gallery a');\nexport function renderGallery(hits, galleryElement) {\n  const markup = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n    <a href=\"${largeImageURL}\" class=\"gallery-link\" target=\"_blank\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" />\n    </a>\n    <div class=\"info\">\n       <div class=\"container-likes\">\n       <p class=\"info-item\"><span>Likes</span> ${likes}</p>\n       </div>\n      <div class=\"container-views\">\n      <p class=\"info-item\"><span>Views</span> ${views}</p>\n      </div>\n      <div class=\"container-comments\">\n      <p class=\"info-item\"><span>Comments</span> ${comments}</p>\n      </div>\n      <div class=\"container-downloads\">\n      <p class=\"info-item\"><span>Downloads</span> ${downloads}</p>\n      </div>\n    </div>\n  </li>`\n    )\n    .join('');\n  galleryElement.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n","import './css/styles.css';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport { PER_PAGE } from './js/pixabay-api.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst input = document.querySelector('.input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.btn-load');\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n  loader.classList.add('active');\n}\n\nfunction hideLoader() {\n  loader.classList.remove('active');\n  loader.classList.add('hidden');\n}\n\nlet currentPage = 1;\nlet searchquery = null;\nlet totalPages = 0;\n\nform.addEventListener('submit', formSubmit);\nloadMoreBtn.addEventListener('click', loadMoreCard);\n\nasync function formSubmit(event) {\n  event.preventDefault();\n\n  const formEL = event.currentTarget;\n  searchquery = form.elements.query.value;\n  if (!searchquery) {\n    iziToast.error({\n      message: 'Error, the search field cannot be empty!',\n      position: 'topRight',\n    });\n    return;\n  }\n  gallery.innerHTML = '';\n  currentPage = 1;\n\n  showLoader();\n\n  try {\n    const { hits, totalHits } = await fetchImages(searchquery);\n    if (hits.length === 0) {\n      throw new Error('No cards found');\n    }\n    totalPages = Math.ceil(totalHits / PER_PAGE);\n    renderGallery(hits, gallery);\n    if (hits.length < 15) {\n      loadMoreBtn.classList.add('is-hidden');\n    } else {\n      loadMoreBtn.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    console.log(error.message);\n    loadMoreBtn.classList.add('is-hidden');\n  } finally {\n    formEL.reset();\n    hideLoader();\n  }\n}\n\nasync function loadMoreCard() {\n  currentPage += 1;\n  showLoader();\n  try {\n    loadMoreBtn.classList.remove('is-hidden');\n    const { hits } = await fetchImages(searchquery, currentPage);\n    renderGallery(hits, gallery);\n    loadMoreScroll();\n    if (currentPage >= totalPages) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.info({\n        message:\n          'We are sorry, but you have reached the end of search results.',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction loadMoreScroll() {\n  const lastHit = gallery.lastElementChild;\n  const hitHeight = lastHit.getBoundingClientRect().height;\n  const scrollHeight = hitHeight * 3;\n\n  window.scrollBy({\n    top: scrollHeight,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","searchquery","currentPage","options","url","hits","totalHits","axios","lightbox","SimpleLightbox","renderGallery","galleryElement","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loader","loadMoreBtn","showLoader","hideLoader","totalPages","formSubmit","loadMoreCard","event","formEL","iziToast","error","loadMoreScroll","scrollHeight"],"mappings":"owBACA,MAAMA,EAAU,qCACVC,EAAW,2BACJC,EAAW,GAEjB,eAAeC,EAAYC,EAAaC,EAAc,EAAG,CAC9D,MAAMC,EAAU,IAAI,gBAAgB,CAClC,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAMG,CACV,CAAG,EACKE,EAAM,GAAGN,CAAQ,QAAQD,CAAO,IAAIM,CAAO,GAC3C,CACJ,KAAM,CAAE,KAAAE,EAAM,UAAAC,CAAW,CAC1B,EAAG,MAAMC,EAAM,IAAIH,CAAG,EAEvB,GAAIC,EAAK,SAAW,EAClB,MAAM,IAAI,MAAM,gBAAgB,EAElC,MAAO,CAAE,KAAAA,EAAM,UAAAC,EACjB,CCrBA,MAAME,EAAW,IAAIC,EAAe,YAAY,EACzC,SAASC,EAAcL,EAAMM,EAAgB,CAClD,MAAMC,EAASP,EACZ,IACC,CAAC,CACC,aAAAQ,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,eACOL,CAAa;AAAA,kBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,iDAIKC,CAAK;AAAA;AAAA;AAAA,gDAGNC,CAAK;AAAA;AAAA;AAAA,mDAGFC,CAAQ;AAAA;AAAA;AAAA,oDAGPC,CAAS;AAAA;AAAA;AAAA,QAIxD,EACA,KAAK,EAAE,EACVR,EAAe,mBAAmB,YAAaC,CAAM,EACrDJ,EAAS,QAAO,CAClB,CC/BA,MAAMY,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EACnC,SAAS,cAAc,QAAQ,EAC7C,MAAMC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,WAAW,EAEtD,SAASC,GAAa,CACpBF,EAAO,UAAU,OAAO,QAAQ,EAChCA,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEA,SAASG,GAAa,CACpBH,EAAO,UAAU,OAAO,QAAQ,EAChCA,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEA,IAAIpB,EAAc,EACdD,EAAc,KACdyB,EAAa,EAEjBN,EAAK,iBAAiB,SAAUO,CAAU,EAC1CJ,EAAY,iBAAiB,QAASK,CAAY,EAElD,eAAeD,EAAWE,EAAO,CAC/BA,EAAM,eAAc,EAEpB,MAAMC,EAASD,EAAM,cAErB,GADA5B,EAAcmB,EAAK,SAAS,MAAM,MAC9B,CAACnB,EAAa,CAChB8B,EAAS,MAAM,CACb,QAAS,2CACT,SAAU,UAChB,CAAK,EACD,MACD,CACDV,EAAQ,UAAY,GACpBnB,EAAc,EAEdsB,IAEA,GAAI,CACF,KAAM,CAAE,KAAAnB,EAAM,UAAAC,CAAS,EAAK,MAAMN,EAAYC,CAAW,EACzD,GAAII,EAAK,SAAW,EAClB,MAAM,IAAI,MAAM,gBAAgB,EAElCqB,EAAa,KAAK,KAAKpB,EAAYP,CAAQ,EAC3CW,EAAcL,EAAMgB,CAAO,EACvBhB,EAAK,OAAS,GAChBkB,EAAY,UAAU,IAAI,WAAW,EAErCA,EAAY,UAAU,OAAO,WAAW,CAE3C,OAAQS,EAAO,CACd,QAAQ,IAAIA,EAAM,OAAO,EACzBT,EAAY,UAAU,IAAI,WAAW,CACzC,QAAY,CACRO,EAAO,MAAK,EACZL,GACD,CACH,CAEA,eAAeG,GAAe,CAC5B1B,GAAe,EACfsB,IACA,GAAI,CACFD,EAAY,UAAU,OAAO,WAAW,EACxC,KAAM,CAAE,KAAAlB,CAAI,EAAK,MAAML,EAAYC,EAAaC,CAAW,EAC3DQ,EAAcL,EAAMgB,CAAO,EAC3BY,IACI/B,GAAewB,IACjBH,EAAY,UAAU,IAAI,WAAW,EACrCQ,EAAS,KAAK,CACZ,QACE,gEACF,SAAU,UAClB,CAAO,EAEJ,MAAe,CACdA,EAAS,MAAM,CACb,QAAS,uBACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRN,GACD,CACH,CAEA,SAASQ,GAAiB,CAGxB,MAAMC,EAFUb,EAAQ,iBACE,sBAAqB,EAAG,OACjB,EAEjC,OAAO,SAAS,CACd,IAAKa,EACL,KAAM,EACN,SAAU,QACd,CAAG,CACH"}